import { Link } from 'react-router-dom';

export default function VulnerabilityList({ vulns }) {
  if (!vulns.length) return <p>No se encontraron vulnerabilidades.</p>;

  const colorRiesgo = (nivel) => {
    switch (nivel.toLowerCase()) {
      case 'bajo':
        return 'var(--color-verde)';
      case 'medio':
        return 'var(--color-naranja)';
      case 'alto':
        return 'var(--color-rojo)';
      case 'cr√≠tico':
      case 'critico':
        return 'var(--color-rojo-oscuro)';
      default:
        return '#888';
    }
  };

  return (
    <div style={{ overflowX: 'auto' }}>
      <table>
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Nivel de riesgo</th>
            <th>Fecha de detecc.</th>
            <th>Ver Detalle</th>
          </tr>
        </thead>
        <tbody>
          {vulns.map((v) => (
            <tr key={v.id}>
              <td>{v.nombre}</td>
              <td style={{ color: colorRiesgo(v.riesgo), fontWeight: 'bold' }}>
                {v.riesgo}
              </td>
              <td>{v.fecha}</td>
              <td>
                <Link to={`/vuln/${v.id}`}>
                  <button className="btn-glass">Ver Detalle</button>
                </Link>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
